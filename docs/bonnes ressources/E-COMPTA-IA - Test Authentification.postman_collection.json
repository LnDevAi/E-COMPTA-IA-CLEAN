{
  "info": {
    "_postman_id": "ecomptaia-auth-test",
    "name": "E-COMPTA-IA - Test Authentification",
    "description": "Collection pour tester les corrections d'authentification après les modifications",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Tests de Base",
      "item": [
        {
          "name": "Test Public",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/test/public",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Test Auth Endpoint",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/auth/test",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Nombre d'utilisateurs",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/auth/users/count",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "2. Tests d'Authentification",
      "item": [
        {
          "name": "Login Admin (admin@ecomptaia.com)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/auth/login",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@ecomptaia.com\",\n  \"password\": \"admin123\"\n}"
            }
          }
        },
        {
          "name": "Test Login (sans auth)",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/auth/test-login",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@ecomptaia.com\",\n  \"password\": \"admin123\"\n}"
            }
          }
        },
        {
          "name": "Register Utilisateur Test",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/auth/register",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@ecomptaia.com\",\n  \"password\": \"test123\"\n}"
            }
          }
        },
        {
          "name": "Login Utilisateur Test",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/auth/login",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@ecomptaia.com\",\n  \"password\": \"test123\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "3. Tests Endpoints Protégés",
      "item": [
        {
          "name": "Comptes Comptables",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/accounting/accounts",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Écritures Comptables",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/ecriture-comptable/all",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Journal Entries",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/journal-entries/all",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Tiers",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/third-parties/all",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "4. Tests Modules Spécifiques",
      "item": [
        {
          "name": "Employés RH",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/hr/employees",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Congés RH",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/hr/leaves",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Paies RH",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/hr/payrolls",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Actifs",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/asset-inventory/assets",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Inventaire",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/asset-inventory/inventory",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        },
        {
          "name": "Documents GED",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/document-management/documents",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      ]
    },
    {
      "name": "5. Tests avec Token JWT",
      "item": [
        {
          "name": "Comptes avec Token",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/accounting/accounts",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ]
          }
        },
        {
          "name": "Employés avec Token",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/hr/employees",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwtToken}}"
              }
            ]
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "jwtToken",
      "value": ""
    }
  ]
}
